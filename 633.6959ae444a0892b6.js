"use strict";(self.webpackChunkDigitalIdCard=self.webpackChunkDigitalIdCard||[]).push([[633],{2844:(_,v,s)=>{s.d(v,{d:()=>T});var r=s(9105),h=s(1135),f=s(6325);const g=[r.BarcodeFormat.CODE_128,r.BarcodeFormat.DATA_MATRIX,r.BarcodeFormat.EAN_13,r.BarcodeFormat.EAN_8,r.BarcodeFormat.ITF,r.BarcodeFormat.QR_CODE,r.BarcodeFormat.RSS_14],u=["Aztec 2D barcode format.","CODABAR 1D format.","Code 39 1D format.","Code 93 1D format.","Code 128 1D format.","Data Matrix 2D barcode format.","EAN-8 1D format.","EAN-13 1D format.","ITF (Interleaved Two of Five) 1D format.","MaxiCode 2D barcode format.","PDF417 format.","QR Code 2D barcode format.","RSS 14","RSS EXPANDED","UPC-A 1D format.","UPC-E 1D format.","UPC/EAN extension format. Not a stand-alone format."];var t=s(4650),m=s(6895),d=s(4859),p=s(6338);function E(i,e){if(1&i&&(t.TgZ(0,"mat-list-option",4),t._uU(1),t.qZA()),2&i){const n=e.$implicit,o=t.oxw();t.Q6J("value",n),t.xp6(1),t.hij(" ",o.formatNames[n]," ")}}class D{constructor(e,n){this.data=e,this._dialogRef=n,this.formatsAvailable=g,this.formatNames=u,this.formatsEnabled=e.formatsEnabled||[]}close(){this._dialogRef.close(this.formatsEnabled)}isEnabled(e){return this.formatsEnabled.find(n=>n===e)}onSelectionChange(e){this.formatsEnabled=e.source.selectedOptions.selected.map(n=>n.value)}static#t=this.\u0275fac=function(n){return new(n||D)(t.Y36(f.WI),t.Y36(f.so))};static#e=this.\u0275cmp=t.Xpm({type:D,selectors:[["app-formats-dialog"]],decls:8,vars:1,consts:[[3,"selectionChange"],["selectedFormats",""],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click"],[3,"value"]],template:function(n,o){1&n&&(t.TgZ(0,"header"),t._uU(1," Available formats: "),t.qZA(),t.TgZ(2,"mat-selection-list",0,1),t.NdJ("selectionChange",function(c){return o.onSelectionChange(c)}),t.YNc(4,E,2,2,"mat-list-option",2),t.qZA(),t.TgZ(5,"mat-dialog-actions")(6,"button",3),t.NdJ("click",function(){return o.close()}),t._uU(7,"Done"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",o.formatsAvailable))},dependencies:[m.sg,d.lW,f.H8,p.Ub,p.vS]})}var l=s(2264),S=s(6926),A=s(7579);class C{constructor(){this.subject=new A.x,this.form=new A.x,this.ClassData=new A.x}sendData(e){this.subject.next(e)}receiveData(){return this.subject.asObservable()}sendForm(e){this.subject.next(e)}receiveForm(){return this.subject.asObservable()}BusinessSend(e){this.ClassData.next(e)}BusinessReceive(){return this.ClassData}static#t=this.\u0275fac=function(n){return new(n||C)};static#e=this.\u0275prov=t.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"})}var N=s(4064),x=s(6231),P=s(9299),O=s(7392),I=s(1864);function F(i,e){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"zxing-scanner",5,6),t.NdJ("deviceChange",function(a){t.CHM(n);const c=t.oxw();return t.KtG(c.currentDevice=a)})("scanSuccess",function(a){t.CHM(n);const c=t.oxw();return t.KtG(c.onCodeResult(a))})("permissionResponse",function(a){t.CHM(n);const c=t.oxw();return t.KtG(c.onHasPermission(a))})("camerasFound",function(a){t.CHM(n);const c=t.oxw();return t.KtG(c.onCamerasFound(a))}),t.qZA(),t.BQk()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("device",n.currentDevice)("formats",n.formatsEnabled)}}function B(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"section",7)(1,"div",8)(2,"strong"),t._uU(3),t.qZA()(),t.TgZ(4,"button",9),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.clearResult())}),t._uU(5,"\xd7"),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(3),t.Oqu(n.qrResultString)}}function M(i,e){1&i&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"Waiting for permissions."),t.qZA(),t.TgZ(3,"blockquote"),t._uU(4," If your device does not has cameras, no permissions will be asked. "),t.qZA(),t.BQk())}function R(i,e){1&i&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"You denied the camera permission, we can't scan anything without it. \u{1f62a}"),t.qZA(),t.BQk())}function y(i,e){1&i&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"Couldn't check for devices."),t.qZA(),t.TgZ(3,"blockquote"),t._uU(4," This may be caused by some security error. "),t.qZA(),t.BQk())}function Z(i,e){1&i&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"No devices were found."),t.qZA(),t.TgZ(3,"blockquote"),t._uU(4," I believe your device has no media devices attached to. "),t.qZA(),t.BQk())}class T{constructor(e,n,o,a,c,b){this._dialog=e,this.service=n,this.dataService=o,this.authService=a,this.noti=c,this.route=b,this.token=localStorage.getItem("token"),this.startCamera=!1,this.formatsEnabled=[r.BarcodeFormat.CODE_128,r.BarcodeFormat.DATA_MATRIX,r.BarcodeFormat.EAN_13,r.BarcodeFormat.QR_CODE],this.torchEnabled=!1,this.torchAvailable$=new h.X(!1),this.tryHarder=!1}clearResult(){console.log("clearResult"),this.qrResultString=""}onCamerasFound(e){this.availableDevices=e,console.log("onCamerasFound"),this.hasDevices=Boolean(e&&e.length)}onCodeResult(e){this.qrResultString="Scanned Successfully !",this.service.isBusiness()?(this.verifiedUserIdentityForSales(e),this.service.RestBusiness()):this.verifiedUserIdentity(e)}onDeviceSelectChange(e){this.availableDevices.find(o=>o.deviceId===e)}openCamera(){this.startCamera=!0}openFormatsDialog(){this._dialog.open(D,{data:{formatsEnabled:this.formatsEnabled}}).afterClosed().subscribe(n=>{n&&(this.formatsEnabled=n)})}onHasPermission(e){console.log("onHasPermission"),this.hasPermission=e}verifiedUserIdentityForSales(e){"1"==this.token||"2"==this.token||"3"==this.token?(l.$.cardConsumerDetails.push({position:"Position-XYZ-1",cardConsumer:"RANDOM",consumeType:"PURCHASE",createOn:"TODAY",consumeOn:"TODAY"}),l.$.productDetails.push({productName:this.service.getBusinessPName(),productPrice:this.service.getBusinessPPrice(),purchaserName:"RANDOM",saleTime:"Now"})):(l.$.cardConsumerDetailsNew.push({position:"Position-XYZ-1",cardConsumer:"RANDOM",consumeType:"PURCHASE",createOn:"TODAY",consumeOn:"TODAY"}),l.$.productDetailsNew.push({productName:this.service.getBusinessPName(),productPrice:this.service.getBusinessPPrice(),purchaserName:"RANDOM",saleTime:"Now"})),this.noti.showSuccess("USER EXIST","IDENTITY DETAILS"),this.route.navigate(["Auth/dashboard/Seller"])}verifiedUserIdentity(e){"1"==this.token||"2"==this.token||"3"==this.token?l.$.cardConsumerDetails.push({position:"Position-XYZ-1",cardConsumer:"RANDOM",consumeType:"IDENTITY",createOn:"TODAY",consumeOn:"TODAY"}):l.$.cardConsumerDetailsNew.push({position:"Position-XYZ-1",cardConsumer:"RANDOM",consumeType:"IDENTITY",createOn:"TODAY",consumeOn:"TODAY"}),this.noti.showSuccess("USER EXIST","IDENTITY DETAILS"),this.route.navigate(["Auth/dashboard"])}static#t=this.\u0275fac=function(n){return new(n||T)(t.Y36(f.uw),t.Y36(S.K),t.Y36(C),t.Y36(N.$),t.Y36(x.g),t.Y36(P.F0))};static#e=this.\u0275cmp=t.Xpm({type:T,selectors:[["app-scanner-main"]],decls:12,vars:7,consts:[[1,"scanner-shell",3,"hidden"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"cameraButton"],["mat-fab","","color","primary","aria-label","Example icon button with a camera icon",3,"click"],[3,"device","formats","deviceChange","scanSuccess","permissionResponse","camerasFound"],["scanner",""],[1,"results"],[1,"results-text"],["mat-icon-button","",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.YNc(1,F,3,2,"ng-container",1),t.YNc(2,B,6,1,"section",2),t.qZA(),t.YNc(3,M,5,0,"ng-container",1),t.YNc(4,R,3,0,"ng-container",1),t.YNc(5,y,5,0,"ng-container",1),t.YNc(6,Z,5,0,"ng-container",1),t.TgZ(7,"div",3),t.ynx(8),t.TgZ(9,"button",4),t.NdJ("click",function(){return o.openCamera()}),t.TgZ(10,"mat-icon"),t._uU(11,"camera"),t.qZA()(),t.BQk(),t.qZA()),2&n&&(t.Q6J("hidden",!o.hasDevices),t.xp6(1),t.Q6J("ngIf",!0===o.startCamera),t.xp6(1),t.Q6J("ngIf",o.qrResultString),t.xp6(1),t.Q6J("ngIf",void 0===o.hasPermission),t.xp6(1),t.Q6J("ngIf",!1===o.hasPermission),t.xp6(1),t.Q6J("ngIf",void 0===o.hasDevices),t.xp6(1),t.Q6J("ngIf",!1===o.hasDevices))},dependencies:[m.O5,d.RK,d.cs,O.Hw,I.S],styles:[".cameraButton[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{align-items:center;align-content:center;text-align:center;margin-left:auto;margin-right:auto}.results-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:green}"]})}},7633:(_,v,s)=>{s.r(v),s.d(v,{ScannerModule:()=>p});var r=s(6895),h=s(9299),f=s(2844),g=s(4650);const u=[{path:"scan",component:f.d}];class t{static#t=this.\u0275fac=function(l){return new(l||t)};static#e=this.\u0275mod=g.oAB({type:t});static#n=this.\u0275inj=g.cJS({imports:[h.Bz.forChild(u),h.Bz]})}var m=s(93),d=s(1864);class p{static#t=this.\u0275fac=function(l){return new(l||p)};static#e=this.\u0275mod=g.oAB({type:p});static#n=this.\u0275inj=g.cJS({imports:[r.ez,t,m.q,d.f]})}},4064:(_,v,s)=>{s.d(v,{$:()=>u});var r=s(2264),h=s(4650),f=s(6926),g=s(529);class u{constructor(m,d){this.service=m,this.client=d,this.url=r.$.url}getProfile(){return this.client.get(`${this.url}DigitalCard/ProfileAtHome?id=${this.service.GetAccessPoint()}`)}getIdentityOfUser(m){return this.client.post(`${this.url}DigitalCard/Identity`,m)}getOriginalProfile(){return this.client.get(`${this.url}DigitalCard/Profile?id=${this.service.GetAccessPoint()}`)}getBusinessProfile(){return this.client.get(`${this.url}DigitalCard/BusinessDetails?id=${this.service.GetAccessPoint()}`)}getAlluser(){return this.client.get(`${this.url}DigitalCard/Users?id=${this.service.GetAccessPoint()}`)}static#t=this.\u0275fac=function(d){return new(d||u)(h.LFG(f.K),h.LFG(g.eN))};static#e=this.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}}}]);