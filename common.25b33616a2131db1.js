"use strict";(self.webpackChunkDigitalIdCard=self.webpackChunkDigitalIdCard||[]).push([[592],{2844:(_,v,s)=>{s.d(v,{d:()=>A});var r=s(9105),d=s(1135),h=s(6325);const f=[r.BarcodeFormat.CODE_128,r.BarcodeFormat.DATA_MATRIX,r.BarcodeFormat.EAN_13,r.BarcodeFormat.EAN_8,r.BarcodeFormat.ITF,r.BarcodeFormat.QR_CODE,r.BarcodeFormat.RSS_14],l=["Aztec 2D barcode format.","CODABAR 1D format.","Code 39 1D format.","Code 93 1D format.","Code 128 1D format.","Data Matrix 2D barcode format.","EAN-8 1D format.","EAN-13 1D format.","ITF (Interleaved Two of Five) 1D format.","MaxiCode 2D barcode format.","PDF417 format.","QR Code 2D barcode format.","RSS 14","RSS EXPANDED","UPC-A 1D format.","UPC-E 1D format.","UPC/EAN extension format. Not a stand-alone format."];var t=s(4650),u=s(6895),m=s(4859),g=s(6338);function E(o,e){if(1&o&&(t.TgZ(0,"mat-list-option",4),t._uU(1),t.qZA()),2&o){const n=e.$implicit,a=t.oxw();t.Q6J("value",n),t.xp6(1),t.hij(" ",a.formatNames[n]," ")}}class C{constructor(e,n){this.data=e,this._dialogRef=n,this.formatsAvailable=f,this.formatNames=l,this.formatsEnabled=e.formatsEnabled||[]}close(){this._dialogRef.close(this.formatsEnabled)}isEnabled(e){return this.formatsEnabled.find(n=>n===e)}onSelectionChange(e){this.formatsEnabled=e.source.selectedOptions.selected.map(n=>n.value)}static#t=this.\u0275fac=function(n){return new(n||C)(t.Y36(h.WI),t.Y36(h.so))};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-formats-dialog"]],decls:8,vars:1,consts:[[3,"selectionChange"],["selectedFormats",""],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click"],[3,"value"]],template:function(n,a){1&n&&(t.TgZ(0,"header"),t._uU(1," Available formats: "),t.qZA(),t.TgZ(2,"mat-selection-list",0,1),t.NdJ("selectionChange",function(c){return a.onSelectionChange(c)}),t.YNc(4,E,2,2,"mat-list-option",2),t.qZA(),t.TgZ(5,"mat-dialog-actions")(6,"button",3),t.NdJ("click",function(){return a.close()}),t._uU(7,"Done"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",a.formatsAvailable))},dependencies:[u.sg,m.lW,h.H8,g.Ub,g.vS]})}var p=s(2264),S=s(6926),T=s(7579);class D{constructor(){this.subject=new T.x,this.form=new T.x,this.ClassData=new T.x}sendData(e){this.subject.next(e)}receiveData(){return this.subject.asObservable()}sendForm(e){this.subject.next(e)}receiveForm(){return this.subject.asObservable()}BusinessSend(e){this.ClassData.next(e)}BusinessReceive(){return this.ClassData}static#t=this.\u0275fac=function(n){return new(n||D)};static#e=this.\u0275prov=t.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}var x=s(4064),F=s(6231),I=s(9299),B=s(7392),P=s(1864);function N(o,e){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"zxing-scanner",5,6),t.NdJ("deviceChange",function(i){t.CHM(n);const c=t.oxw();return t.KtG(c.currentDevice=i)})("scanSuccess",function(i){t.CHM(n);const c=t.oxw();return t.KtG(c.onCodeResult(i))})("permissionResponse",function(i){t.CHM(n);const c=t.oxw();return t.KtG(c.onHasPermission(i))})("camerasFound",function(i){t.CHM(n);const c=t.oxw();return t.KtG(c.onCamerasFound(i))}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("device",n.currentDevice)("formats",n.formatsEnabled)}}function Z(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"section",7)(1,"div")(2,"small"),t._uU(3,"Result"),t.qZA(),t.TgZ(4,"strong"),t._uU(5),t.qZA()(),t.TgZ(6,"button",8),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.clearResult())}),t._uU(7,"\xd7"),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(5),t.Oqu(n.qrResultString)}}function b(o,e){1&o&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"Waiting for permissions."),t.qZA(),t.TgZ(3,"blockquote"),t._uU(4," If your device does not has cameras, no permissions will be asked. "),t.qZA(),t.BQk())}function y(o,e){1&o&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"You denied the camera permission, we can't scan anything without it. \u{1f62a}"),t.qZA(),t.BQk())}function M(o,e){1&o&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"Couldn't check for devices."),t.qZA(),t.TgZ(3,"blockquote"),t._uU(4," This may be caused by some security error. "),t.qZA(),t.BQk())}function R(o,e){1&o&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"No devices were found."),t.qZA(),t.TgZ(3,"blockquote"),t._uU(4," I believe your device has no media devices attached to. "),t.qZA(),t.BQk())}class A{constructor(e,n,a,i,c,O){this._dialog=e,this.service=n,this.dataService=a,this.authService=i,this.noti=c,this.route=O,this.startCamera=!1,this.formatsEnabled=[r.BarcodeFormat.CODE_128,r.BarcodeFormat.DATA_MATRIX,r.BarcodeFormat.EAN_13,r.BarcodeFormat.QR_CODE],this.torchEnabled=!1,this.torchAvailable$=new d.X(!1),this.tryHarder=!1}clearResult(){console.log("clearResult"),this.qrResultString=""}onCamerasFound(e){this.availableDevices=e,console.log("onCamerasFound"),this.hasDevices=Boolean(e&&e.length)}onCodeResult(e){this.qrResultString="Scanned Successfully !",this.service.isBusiness()?(this.verifiedUserIdentityForSales(e),this.service.RestBusiness()):this.verifiedUserIdentity(e)}onDeviceSelectChange(e){this.availableDevices.find(a=>a.deviceId===e)}openCamera(){this.startCamera=!0}openFormatsDialog(){this._dialog.open(C,{data:{formatsEnabled:this.formatsEnabled}}).afterClosed().subscribe(n=>{n&&(this.formatsEnabled=n)})}onHasPermission(e){console.log("onHasPermission"),this.hasPermission=e}verifiedUserIdentityForSales(e){p.$.cardConsumerDetails.push({position:"Position-XYZ-1",cardConsumer:"RANDOM",consumeType:"PURCHASE",createOn:"TODAY",consumeOn:"TODAY"}),p.$.productDetails.push({productName:this.service.getBusinessPName(),productPrice:this.service.getBusinessPPrice(),purchaserName:"RANDOM",saleTime:"Now"}),this.noti.showSuccess("USER EXIST","IDENTITY DETAILS"),this.route.navigate(["Auth/dashboard/Seller"])}verifiedUserIdentity(e){p.$.cardConsumerDetails.push({position:"Position-XYZ-1",cardConsumer:"RANDOM",consumeType:"IDENTITY",createOn:"TODAY",consumeOn:"TODAY"}),this.noti.showSuccess("USER EXIST","IDENTITY DETAILS"),this.route.navigate(["Auth/dashboard"])}static#t=this.\u0275fac=function(n){return new(n||A)(t.Y36(h.uw),t.Y36(S.K),t.Y36(D),t.Y36(x.$),t.Y36(F.g),t.Y36(I.F0))};static#e=this.\u0275cmp=t.Xpm({type:A,selectors:[["app-scanner-main"]],decls:12,vars:7,consts:[[1,"scanner-shell",3,"hidden"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"cameraButton"],["mat-fab","","color","primary","aria-label","Example icon button with a camera icon",3,"click"],[3,"device","formats","deviceChange","scanSuccess","permissionResponse","camerasFound"],["scanner",""],[1,"results"],["mat-icon-button","",3,"click"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0),t.YNc(1,N,3,2,"ng-container",1),t.YNc(2,Z,8,1,"section",2),t.qZA(),t.YNc(3,b,5,0,"ng-container",1),t.YNc(4,y,3,0,"ng-container",1),t.YNc(5,M,5,0,"ng-container",1),t.YNc(6,R,5,0,"ng-container",1),t.TgZ(7,"div",3),t.ynx(8),t.TgZ(9,"button",4),t.NdJ("click",function(){return a.openCamera()}),t.TgZ(10,"mat-icon"),t._uU(11,"camera"),t.qZA()(),t.BQk(),t.qZA()),2&n&&(t.Q6J("hidden",!a.hasDevices),t.xp6(1),t.Q6J("ngIf",!0===a.startCamera),t.xp6(1),t.Q6J("ngIf",a.qrResultString),t.xp6(1),t.Q6J("ngIf",void 0===a.hasPermission),t.xp6(1),t.Q6J("ngIf",!1===a.hasPermission),t.xp6(1),t.Q6J("ngIf",void 0===a.hasDevices),t.xp6(1),t.Q6J("ngIf",!1===a.hasDevices))},dependencies:[u.O5,m.RK,m.cs,B.Hw,P.S],styles:[".cameraButton[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{align-items:center;align-content:center;text-align:center;margin-left:auto;margin-right:auto}"]})}},7633:(_,v,s)=>{s.r(v),s.d(v,{ScannerModule:()=>g});var r=s(6895),d=s(9299),h=s(2844),f=s(4650);const l=[{path:"scan",component:h.d}];class t{static#t=this.\u0275fac=function(p){return new(p||t)};static#e=this.\u0275mod=f.oAB({type:t});static#n=this.\u0275inj=f.cJS({imports:[d.Bz.forChild(l),d.Bz]})}var u=s(93),m=s(1864);class g{static#t=this.\u0275fac=function(p){return new(p||g)};static#e=this.\u0275mod=f.oAB({type:g});static#n=this.\u0275inj=f.cJS({imports:[r.ez,t,u.q,m.f]})}},4064:(_,v,s)=>{s.d(v,{$:()=>l});var r=s(2264),d=s(4650),h=s(6926),f=s(529);class l{constructor(u,m){this.service=u,this.client=m,this.url=r.$.url}getProfile(){return this.client.get(`${this.url}DigitalCard/ProfileAtHome?id=${this.service.GetAccessPoint()}`)}getIdentityOfUser(u){return this.client.post(`${this.url}DigitalCard/Identity`,u)}getOriginalProfile(){return this.client.get(`${this.url}DigitalCard/Profile?id=${this.service.GetAccessPoint()}`)}getBusinessProfile(){return this.client.get(`${this.url}DigitalCard/BusinessDetails?id=${this.service.GetAccessPoint()}`)}getAlluser(){return this.client.get(`${this.url}DigitalCard/Users?id=${this.service.GetAccessPoint()}`)}static#t=this.\u0275fac=function(m){return new(m||l)(d.LFG(h.K),d.LFG(f.eN))};static#e=this.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}}}]);